<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.cloud.gds.cleaning.mapper.AnalysisResultMapper">

	<!-- 可根据自己的需求，是否要使用 -->
	<resultMap id="dataFieldMap" type="com.cloud.gds.cleaning.api.entity.AnalysisResult">
		<result column="field_id" property="fieldId"/>
		<result column="base_id" property="baseId"/>
		<result column="compare_id" property="compareId"/>
		<result column="similarity" property="similarity"/>
		<result column="is_manual" property="isManual"/>
	</resultMap>


	<insert id="insertAll">
		insert into dataclean_analysis_result (field_id,base_id,compare_id,similarity,is_manual) values
		<foreach collection="valueList" item="result" separator=",">
			(#{result.fieldId},#{result.baseId},#{result.compareId},#{result.similarity},#{result.isManual})
		</foreach>
	</insert>

	<delete id="relevanceDelete">
		DELETE FROM dataclean_analysis_result
		where base_id in
		<foreach item="id" collection="ids" open="("
						   separator="," close=")">
		#{id}
	</foreach>
		or
		compare_id in
		<foreach item="id" collection="ids" open="("
				 separator="," close=")">
			#{id}
		</foreach>
	</delete>

</mapper>
